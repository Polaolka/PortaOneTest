document.getElementById("fileInput").addEventListener("change",function(e){document.getElementById("puzzle-info").textContent="",document.getElementById("result").textContent="";let n=e.target.files[0];if(!n){alert("Будь ласка, виберіть файл.");return}let l="",r=new FileReader;r.onload=async function(e){let n=e.target.result.split(/[\s,]+/).filter(Boolean).filter(e=>/^\d+$/.test(e));l=function(e){let t=e[0];for(let n=1;n<e.length;n++)t+=e[n].slice(2);return t}(await t(n)),document.getElementById("result").textContent=`\u{420}\u{435}\u{437}\u{443}\u{43B}\u{44C}\u{442}\u{430}\u{442}: ${l}`},r.readAsText(n),e.target.value=""}),document.querySelector(".precision-toggler").addEventListener("change",function(t){t.target.checked?e.highPrecision=!0:e.highPrecision=!1});const e={highPrecision:!1};async function t(t){let r=function(e){console.log("Будуємо граф");let t={};return e.forEach(n=>{let l=n.slice(-2);t[l]||(t[l]=[]),e.forEach(e=>{e!==n&&e.slice(0,2)===l&&t[l].push(e)})}),t}(t),o=[],i=!1;console.log("Граф збудований:",r);let u=setTimeout(()=>{i=!0},12e4);console.log("Запуск 'жадібної' оптимізації...");let a=[];for(let e of t){if(i)break;let t=await n({start:e,graph:r,calculationInterrupted:i});t.length>a.length&&(a=t)}if(e.highPrecision)for(let e of(console.log("Запуск DFS для високої точності..."),t)){if(i)break;let t=await l({start:e,graph:r,calculationInterrupted:i});t.length>o.length&&(o=t)}return(clearTimeout(u),i)?(document.getElementById("result").textContent="Обчислення зайняло забагато часу. Спробуйте зменшити набір чисел.",[]):o.length>a.length?o:a}async function n({start:e,calculationInterrupted:t,graph:n}){let l=[e],r=e;for(;;){if(t)return[];let e=(n[r.slice(-2)]||[]).filter(e=>!l.includes(e));if(0===e.length)break;r=e[0],l.push(r),await new Promise(e=>setTimeout(e))}return l}async function l({start:e,graph:t,calculationInterrupted:n}){let l=[{current:e,path:[e]}],r=[],o=new Set;for(;l.length>0&&!n;){let{current:e,path:n}=l.pop();if(e){for(let i of(o.add(e),n.length>r.length&&(r=n),t[e.slice(-2)]||[]))n.includes(i)||l.push({current:i,path:[...n,i]});await new Promise(e=>setTimeout(e,0))}}return r}
//# sourceMappingURL=index.c74515c6.js.map

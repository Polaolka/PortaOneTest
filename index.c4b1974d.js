!function(){document.getElementById("fileInput").addEventListener("change",function(t){document.getElementById("puzzle-info").textContent="";let n=t.target.files[0];if(!n){alert("Будь ласка, виберіть файл.");return}let l="",o=[],i=new FileReader;i.onload=function(t){l=function(e){let t=e[0];for(let n=1;n<e.length;n++)t+=e[n].slice(2);return t}(o=function(t){let n=function(e){console.log("Будуємо граф");let t={};return e.forEach(n=>{let l=n.slice(-2);t[l]||(t[l]=[]),e.forEach(e=>{e!==n&&e.slice(0,2)===l&&t[l].push(e)})}),t}(t),l=new Map,o=[],i=!1;console.log("calculationInterrupted",!1);let r=setTimeout(()=>{i=!0},6e4);console.log("Жадібна оптимізація для раннього грубого розв'язку");let u=function(e){console.log("Фільтрація чисел, які не можуть бути частиною довгого шляху");let t=new Set(e.map(e=>e.slice(0,2))),n=new Set(e.map(e=>e.slice(-2)));return e.filter(e=>t.has(e.slice(-2))||n.has(e.slice(0,2)))}(t),c=[];for(let e of u){if(i)break;let t=function(e){let t=[e],l=e;if(i)return[];for(;;){let e=(n[l.slice(-2)]||[]).filter(e=>!t.includes(e));if(0===e.length)break;l=e[0],t.push(l)}return t}(e);t.length>c.length&&(c=t)}if(e.highPrecision){for(let t of(console.log(e.highPrecision),console.log("рахуємо довго!"),document.getElementById("puzzle-info").textContent="Pахуємо довго!",u)){if(i)break;let e=function e(t,o){if(i)return console.log("Обчислення зайняло забагато часу. Виберіть меншу точність і повторіть спробу."),document.getElementById("result").textContent="Обчислення зайняло забагато часу. Виберіть меншу точність і повторіть спробу.",[];let r=`${t}:${o.join(",")}`;if(l.has(r))return l.get(r);let u=n[t.slice(-2)]||[],c=[...o];for(let t of u)if(!o.includes(t)){let n=e(t,[...o,t]);n.length>c.length&&(c=n)}return l.set(r,c),c}(t,[t]);e.length>o.length&&(o=e)}return(clearTimeout(r),i)?(document.getElementById("result").textContent="Обчислення зайняло забагато часу. Виберіть меншу точність і повторіть спробу.",[]):o.length>c.length?o:c}return c}(t.target.result.split(/[\s,]+/).filter(Boolean).filter(e=>/^\d+$/.test(e)))),document.getElementById("result").textContent=`\u{420}\u{435}\u{437}\u{443}\u{43B}\u{44C}\u{442}\u{430}\u{442}: ${l}`,console.log("Найдовший ланцюжок:",o),console.log("Об'єднаний рядок:",l)},i.readAsText(n),t.target.value=""}),document.querySelector(".precision-toggler").addEventListener("change",function(t){t.target.checked?e.highPrecision=!0:e.highPrecision=!1});let e={highPrecision:!1}}();
//# sourceMappingURL=index.c4b1974d.js.map
